<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Privacy Rules Plugin</title>
    <link rel="stylesheet" href="style.css">
    <script src="../common/jquery.js"></script>
    <script src="../common/iframe-phone.js"></script>
    <script src="../common/CodapInterface.js"></script>
    <script src="../common/pluginHelper.js"></script>
    <script src="privacy.js"></script>
    <script>
        $(function () {
            startCodapConnection();
        });
    </script>
</head>
<body>

    <!-- Main Screen -->
    <div id="main">
        <h1>Privacy Rules</h1>
        <div class="ruleSection" onclick="showModule('kAnonymityMainScreen')">
            <h2>K-Anonymity</h2>
        </div>
        <div class="ruleSection" onclick="showModule('lDiversityMainScreen')">
            <h2>L-Diversity</h2>
        </div>
        <div class="ruleSection" onclick="showModule('tClosenessMainScreen')">
            <h2>T-Closeness</h2>
        </div>
        <div class="ruleSection" onclick="showModule('differentialPrivacyMainScreen')">
            <h2>Differential Privacy</h2>
        </div>
    </div>

    <!-- K-Anonymity Main Screen -->
    <div id="kAnonymityMainScreen" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('main')">Back</button>
        <h1>K-Anonymity Modules</h1>
        <div class="moduleSection" onclick="showModule('kAnonymityIntro')">
            <h2>Introduction to K-Anonymity</h2>
        </div>
        <!-- Add more modules here -->
        <div class="moduleSection" onclick="showModule('kAnonymityIntro')">
            <h2>Placeholder Module</h2>
        </div>
        <div class="moduleSection" onclick="showModule('kAnonymityIntro')">
            <h2>Placeholder Module</h2>
        </div>
    </div>

    <!-- K-Anonymity Introduction Module -->
    <div id="kAnonymityIntro" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('kAnonymityMainScreen')">Back</button>
        <h1>Introduction to K-Anonymity</h1>
        <!-- Add lesson content here -->
    </div>

    <!-- L-Diversity Main Screen -->
    <div id="lDiversityMainScreen" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('main')">Back</button>
        <h1>L-Diversity Modules</h1>
        <div class="moduleSection" onclick="showModule('lDiversityIntro')">
            <h2>Introduction to L-Diversity</h2>
        </div>
        <!-- Add more modules here -->
        <div class="moduleSection" onclick="showModule('lDiversityIntro')">
            <h2>Placeholder Module</h2>
        </div>
        <div class="moduleSection" onclick="showModule('lDiversityIntro')">
            <h2>Placeholder Module</h2>
        </div>
    </div>

    <!-- L-Diversity Introduction Module -->
    <div id="lDiversityIntro" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('lDiversityMainScreen')">Back</button>
        <h1>Introduction to L-Diversity</h1>
        <!-- Add lesson content here -->
    </div>

    <!-- T-Closeness Main Screen -->
    <div id="tClosenessMainScreen" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('main')">Back</button>
        <h1>T-Closeness Modules</h1>
        <div class="moduleSection" onclick="showModule('tClosenessIntro')">
            <h2>Introduction to T-Closeness</h2>
        </div>
        <!-- Add more modules here -->
        <div class="moduleSection" onclick="showModule('tClosenessIntro')">
            <h2>Placeholder Module</h2>
        </div>
        <div class="moduleSection" onclick="showModule('tClosenessIntro')">
            <h2>Placeholder Module</h2>
        </div>
    </div>

    <!-- T-Closeness Introduction Module -->
    <div id="tClosenessIntro" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('tClosenessMainScreen')">Back</button>
        <h1>Introduction to T-Closeness</h1>
        <!-- Add lesson content here -->
    </div>

    <!-- Differential Privacy Main Screen -->
    <div id="differentialPrivacyMainScreen" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('main')">Back</button>
        <h1>Differential Privacy Modules</h1>
        <div class="moduleSection" onclick="showModule('differentialPrivacyIntro')">
            <h2>Introduction to Differential Privacy</h2>
        </div>
        <!-- Add more modules here -->
        <div class="moduleSection" onclick="showModule('differentialPrivacyIntro')">
            <h2>Placeholder Module</h2>
        </div>
        <div class="moduleSection" onclick="showModule('differentialPrivacyIntro')">
            <h2>Placeholder Module</h2>
        </div>
    </div>

    <!-- Differential Privacy Module -->
    <div id="differentialPrivacyModule" class="privacyModule" style="display:none;">
        <button class="backButton" onclick="showModule('main')">Back to Main</button>
        <h1>Differential Privacy</h1>

        <p>Differential Privacy is a technique that ensures the privacy of data in a dataset by adding random noise to the data. 
            We will be using an example query to demonstrate how Differential Privacy works, selecting all cases where the age is greater than or equal to 40,
            and see how the results change when we apply Differential Privacy and noise is added.
        </p>
        <h3>Instructions:</h3>
        <ol>
            <li>Adjust the epsilon and sensitivity values to see how privacy levels change.</li>
            <li>Click "Apply Differential Privacy" to see how noise affects the results.</li>
        </ol>

        <input type="range" id="epsilonSlider" min="0.1" max="1.0" step="0.1" value="0.1" oninput="updateEpsilon(this.value)">
        <label for="epsilonSlider">Epsilon: <span id="epsilonValue">0.1</span></label>
        <input type="range" id="sensitivitySlider" min="1.0" max="10.0" step="1.0" value="1.0" oninput="updateSensitivity(this.value)">
        <label for="sensitivitySlider">Sensitivity: <span id="sensitivityValue">1.0</span></label>

        <button onclick="applyDifferentialPrivacy()">Apply Differential Privacy</button>
        <p><strong>True Result:</strong> <span id="trueResult">N/A</span></p>
        <p><strong>Noisy Result:</strong> <span id="noisyResult">N/A</span></p>
        <p><strong>Difference:</strong> <span id="difference">N/A</span></p>

    </div>
</body>
